function PromiseCtrl(){function o(){console.log(PromiseFc.count),vm.promise=PromiseFc.displayFunction().then(function(o){vm.displayText=o.data},function(o){vm.displayText=o}),console.log("after promise"),e(),console.log("after fucntion")}function e(){console.log("inside wait")}vm=this,vm.promise=null,vm.displayText="hello",vm.onClickButton=o,window.onbeforeunload=function(o){return"why would you do that???"}}function PromiseFc(){function o(){factory.count++,factory.lastPromise&&factory.lastPromise.reject("rejected");var o=$q.defer();return factory.lastPromise=o,setTimeout(function(){o.resolve({data:"promise resolved"+factory.count})},5e3),o.promise}return factory={},factory.count=0,factory.lastPromise=null,factory.displayFunction=o,factory}angular.module("PromiseApp",["ngMaterial"]),angular.module("PromiseApp").controller("PromiseCtrl",PromiseCtrl),angular.module("PromiseApp").factory("PromiseFc",PromiseFc),PromiseCtrl.$inject=["PromiseFc"],PromiseFc.$inject=["$q","$timeout"];